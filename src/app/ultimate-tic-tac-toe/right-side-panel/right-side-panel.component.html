<div class="settings-panel" [class.collapsed]="!settings.isSettingsVisible">


  <button class="toggle-btn" (click)="toggleSettings()" aria-label="Toggle settings">&times;</button>
  <div class="content-wrapper">

    <div class="tabs">
      <button [class.active]="activeTab === 'moves'" (click)="setTab('moves')">
        <mat-icon style="margin-bottom: -7px; font-size: 20px;">description</mat-icon> Moves
      </button>
      <button [class.active]="activeTab === 'settings'" (click)="setTab('settings')">
        <mat-icon style="margin-bottom: -7px; font-size: 20px;">tune</mat-icon>Settings
      </button>
    </div>

    <!-- Moves Tab Content -->
    <div *ngIf="activeTab === 'moves'" class="moves-tab tab-content">
      <div class="table-scroll-container" #scrollContainer>
        <table class="moves-table">
          <thead>
          <tr>
            <th class="move-number-header">#</th>
            <th>Cross</th>
            <th>Circle</th>
          </tr>
          </thead>
          <tbody>
          <tr *ngFor="let i of maxMovesArray()">
            <td class="move-number-cell">
              <strong>{{ i + 1 }}.</strong>
            </td>
            <td>
          <span *ngIf="player1Moves[i]">
            <span class="coord">{{ player1Moves[i] }}</span>
          </span>
            </td>
            <td>
          <span *ngIf="player2Moves[i]">
            <span class="coord">{{ player2Moves[i] }}</span>
          </span>
            </td>
          </tr>
          </tbody>
        </table>
      </div>
    </div>

    <div *ngIf="activeTab === 'moves'" class="button-row">

      <button matTooltip="You can also press left arrow to undo last move." (click)="onUndo()" class="undo-btn" aria-label="Undo" [disabled]="moves.length < 1">
        <i class="bi bi-arrow-left"></i>
      </button>

      <button matTooltip="You can also press 'c' to clear the board." (click)="onClearBoard()" class="clear-btn" aria-label="Clear board">
        Clear Board
      </button>
    </div>

    <!-- Settings Tab Content -->
    <div *ngIf="activeTab === 'settings'" class="settings-tab tab-content">
      <h3>Engine Settings</h3>

      <label for="thinkingTime" style="margin-bottom:-5px; display:block;">
        Thinking Time (ms): {{settings.thinkingTime}}
      </label>
      <input
        id="thinkingTime"
        type="range"
        min="100"
        max="1000"
        step="100"
        [(ngModel)]="settings.thinkingTime"
        (input)="onSettingsChange()"
        style="margin-top:2px; display:block;"
      />

      <label>
        <input type="checkbox" [(ngModel)]="settings.showEval" (ngModelChange)="onSettingsChange()"
               style="margin-top:15px"/> Show Eval
      </label>

      <label>
        <input type="checkbox" [(ngModel)]="settings.showVisits" (ngModelChange)="onSettingsChange()"/> Show Visits
      </label>

      <label>
        <input type="checkbox" [(ngModel)]="settings.playVsAi" (ngModelChange)="onSettingsChange()"/> AI moves
        automatically
      </label>
    </div>
  </div>
</div>
